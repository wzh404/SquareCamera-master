<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
<form id="frm">
    <div id="box2" style="margin:0px auto; width:100%; min-height:150px; background:#FF9">
        <input type="file" name="file" id="file" />
        <a href="#" onclick="javascript:upload()">上传</a>
        <img src="#" id="icon"/>
    </div>
</form>

<br/><br/><br/>

<a href="#" onclick="javascript:a('specialist')">专家登陆</a> |
<a href="#" onclick="javascript:a('student')">普通职员登陆</a> |
<a href="#" onclick="javascript:b('/search/article?key=医药代表&page=1', {})">搜索文章!</a>|
<a href="#" onclick="javascript:b('/user/article?article_id=1', {})">文章详情!</a>|
<br/>

<a href="#" onclick="javascript:b('/user/profile', {})">用户咨询详情</a>|
<a href="#" onclick="javascript:b('/user/specialist/profile', {})">专家详情</a>|
<a href="#" onclick="javascript:b('/user/specialist/articles?page=1', {})">专家文章列表</a>|
<a href="#" onclick="javascript:b('/user/my/consult?page=1', {})">我咨询的</a>|
<a href="#" onclick="javascript:b('/user/consult/me?page=1', {})">咨询我的</a>|
<a href="#" onclick="javascript:b('/user/consultation/conditions', {})">可咨询条件</a>|
<a href="#" onclick="javascript:b('/user/points?page=1', {})">我的积分</a>|
</br>

<a href="#" onclick="javascript:s1('/user/search/specialist?page=1')">我要问专家</a>|
<a href="#" onclick="javascript:b('/user/watch/articles?page=1', {})">大家都在看</a>|
<a href="#" onclick="javascript:b('/user/follow/topics?page=1', {})">我关注的话题</a>|
<br/>
<a href="#" onclick="javascript:s2('/user/apply/consultation')">咨询</a>|
<a href="#" onclick="javascript:b('/user/confirm/consultation?id=8&op=confirm', {})">确认申请!</a>|
<a href="#" onclick="javascript:b('/user/reject/consultation?id=3&op=reject', {})">拒绝申请!</a>|
<a href="#" onclick="javascript:b('/user/topic/details?topic_id=1', {})">主题详情</a>|
<a href="#" onclick="javascript:b('/user/topic/articles?topic_id=1&page=2', {})">下拉主题文章</a>|

<br/>
<a href="#" onclick="javascript:b('/user/topic/specialists?topic_id=1&page=1', {})">主题专家列表</a>|
<a href="#" onclick="javascript:comment2('/user/specialist/score')">对专家评价</a>|
<a href="#" onclick="javascript:comment('/user/score')">对用户评价</a>|
<a href="#" onclick="javascript:b('/user/follow/topic?topic_id=1', {})">关注主题</a>|
<a href="#" onclick="javascript:b('/user/unfollow/topic?topic_id=1', {})">取消关注主题</a>|
<a href="#" onclick="javascript:b('/user/like/article?article_id=1', {})">点赞文章</a>|
<a href="#" onclick="javascript:b('/user/unlike/article?article_id=1', {})">取消点赞</a>|
</br></br></br>
【</br>
<span id="msg_id" >off</span>
</br>
】
<br/>
<a href="#" onclick="javascript:login('/manager/user/login', {'name':'admin', 'pwd':'admin'})">登录</a> |
<a href="#" onclick="javascript:c()">新增问题</a> |
<a href="#" onclick="javascript:d()">编辑问题</a> |
<a href="#" onclick="javascript:user()">新增用户</a> |
<a href="#" onclick="javascript:b('/manager/question/detail?question_id=26', {})">查看问题</a> |
<a href="#" onclick="javascript:b('/manager/question/close?question_id=1', {})">关闭问题</a> |
<a href="#" onclick="javascript:b('/manager/question/recommend?question_id=7', {})">推荐问题</a> |
<a href="#" onclick="javascript:b('/manager/question/unrecommend?question_id=7', {})">取消推荐</a> |
<a href="#" onclick="javascript:b('/manager/question/search?title=医药代表&start_time=2018-01-01&end_time=2018-06-01&page=1', {})">问题管理</a> |
<a href="#" onclick="javascript:b('/manager/user/search?name=adm&start_time=2018-01-01&end_time=2018-06-01&page=1', {})">用户管理</a> |
<a href="#" onclick="javascript:b('/manager/user/search?page=1', {})">用户管理2</a> |
<a href="#" onclick="javascript:b('/manager/user/close?user_id=1', {})">停止用户</a> |
<a href="#" onclick="javascript:b('/manager/user/active?user_id=1', {})">激活用户</a> |
<a href="#" onclick="javascript:b('/manager/user/delete?user_id=1', {})">删除用户</a> |
<a href="#" onclick="javascript:b('/manager/user/view?user_id=1', {})">查看用户</a> |
<a href="#" onclick="javascript:b('/manager/user/list', {})">列表用户</a> |
<br><br>
<a href="#" onclick="javascript:feedback()">新增用户反馈意见</a> |
<a href="#" onclick="javascript:b('/manager/user/list/feedback?page=1', {})">分页用户反馈意见</a> |
<a href="#" onclick="javascript:b('/manager/user/view/feedback?id=9', {})">查看用户反馈意见</a> |

<a href="#" onclick="javascript:b('/manager/stat/question', {})">统计</a> |
<script type="text/javascript">
    var access_token = "";
    var icon = "";
    //var g_uri = "http://119.254.84.20:8889";
    //var g_uri = "http://10.13.202.49:8889";
    var g_uri = "http://localhost:8889";

let promise = new Promise(function(resolve, reject) {
  console.log('Promise');
  resolve();
});

promise.then(function() {
  console.log('resolved.');
});

console.log('Hi!');

    function a(name) {
        $.ajax({
            type : "GET",
            url : g_uri + "/user/apply/access-token",
            data : {
                "code": name
            },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success : function(result) {
                access_token = result.result.access_token;
                $('#msg_id').html('on');
            }
        });
    }

    function b(url, data) {
        $.ajax({
            type : "GET",
            url : g_uri + url,
            headers: {
                "access_token": access_token
            },
            data : data,
            success : function(result) {
                $('#msg_id').html(JSON.stringify(result));
            }
        });
    }


    function s1(url) {
        $.ajax({
            type : "POST",
            url : g_uri + url,
            headers: {
                "access_token": access_token
            },
            data : JSON.stringify({
                "label":"1001",
                "bad":"0",
                "contract":"0",
                "week": 2,
                "timeline": "10001030",
                "duration": 30,
                "way": "mobile"
            }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success : function(result) {
                $('#msg_id').html(JSON.stringify(result));
            }
        });
    }

    function s2(url) {
        $.ajax({
            type : "POST",
            url : g_uri + url,
            headers: {
                "access_token": access_token
            },
            data : JSON.stringify({
                "byUserId":1,
                "cdate":"2018-07-04",
                "topicId": 1,
                "code":"10001030",
                "startTime": "10:10",
                "endTime": "10:20",
                "way": "mobile",
                "mobile": "13911709225"
            }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success : function(result) {
                $('#msg_id').html(JSON.stringify(result));
            }
        });
    }

    function comment(url) {
        $.ajax({
            type : "POST",
            url : g_uri + url,
            headers: {
                "access_token": access_token
            },
            data : JSON.stringify({
                "logId":3,
                "breakContract": 0,
                "attitude":4,
                "polite": 4,
                "punctuality": 3,
                "other": "10:20"
            }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success : function(result) {
                $('#msg_id').html(JSON.stringify(result));
            }
        });
    }

    function comment2(url) {
        $.ajax({
            type : "POST",
            url : g_uri + url,
            headers: {
                "access_token": access_token
            },
            data : JSON.stringify({
                "logId":3,
                "breakContract": 0,
                "attitude":3,
                "specialization": 4,
                "patience": 5,
                "articulation": 4,
                "logicalClarity": 4,
                "punctuality": 3,
                "other": "10:20"
            }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success : function(result) {
                $('#msg_id').html(JSON.stringify(result));
            }
        });
    }

    function d() {
        $.ajax({
            type : "POST",
            url : g_uri + "/manager/question/edit",
            data : JSON.stringify({
                "id":29,
                "title":"TITLE TEST EDIT",
                "content":"www EDIT",
                "icon":icon,
                "answers":[{
                    "id":23,
                    "content":"CONTENT---1 EDIT-0",
                    "create_id" : 7,
                },
                {
                    "id":0,
                    "content":"NEWANSWER CONTENT---1",
                    "create_id" : 7,
                }]
            }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success : function(result) {
                $('#msg_id').html(JSON.stringify(result));
            }
        });
    }

    function user() {
        $.ajax({
            type : "POST",
            url : g_uri + "/manager/user/new",
            data : JSON.stringify({
                "kcode":"127456",
                "name":"www",
                "pinyin":"pinyin",
                "bu":"bubu"
            }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success : function(result) {
                $('#msg_id').html(JSON.stringify(result));
            }
        });
    }

    function upload() {
        var formData = new FormData($( "#frm" )[0]);
        $.ajax({
            type : "POST",
            url : g_uri + "/manager/question/upload",
            data : formData,
            cache : false,
            processData:false,
            contentType:false,
            success : function(result) {
                icon = result.result.file;
                $('icon').attr('src', icon);
                $('#msg_id').html(JSON.stringify(result));
            }
        });
    }

    function login(url, data) {
        $.ajax({
            type : "POST",
            url : g_uri + url,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data : JSON.stringify(data),
            success : function(result) {
                $('#msg_id').html(JSON.stringify(result));
            }
        });
    }

    function feedback() {
        $.ajax({
            type : "GET",
            url : g_uri + "/user/apply/feedback",
            headers: {
                "access_token": access_token
            },
            data : {
                "feedback":"内容缺失-0001",
                "classification":"03",
                "photo":"http://test.com/a.jpg"
            },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success : function(result) {
                $('#msg_id').html(JSON.stringify(result));
            }
        });
    }
</script>
</body>
</html>